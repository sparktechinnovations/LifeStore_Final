function _0x34cc(_0xb457fe,_0x4f46c8){const _0x2adc1f=_0x2adc();return _0x34cc=function(_0x34cccf,_0x68127){_0x34cccf=_0x34cccf-0xc1;let _0x3300b5=_0x2adc1f[_0x34cccf];return _0x3300b5;},_0x34cc(_0xb457fe,_0x4f46c8);}const _0x54b36f=_0x34cc;function _0x2adc(){const _0x5d0bc2=['Female','Types','127614LPeKRz','padStart','bcrypt','ObjectId','index','Agent','getFullYear','30uxLDcJ','mongoose','376376QvkUDZ','findOne','statics','683158BWHyva','plugin','false','Schema','save','Other','Invalid\x20credentials','3149946vRWAra','pre','customerUid','30500JQRmMT','135Chkqws','70JoHYUe','login','model','password','255FcRGUN','22057354zVbfhk','40340allqyH','isModified','Male','mongoose-unique-validator'];_0x2adc=function(){return _0x5d0bc2;};return _0x2adc();}(function(_0x967231,_0x10aa55){const _0x3416e9=_0x34cc,_0x1e4299=_0x967231();while(!![]){try{const _0x4c056a=parseInt(_0x3416e9(0xe4))/0x1*(parseInt(_0x3416e9(0xc2))/0x2)+parseInt(_0x3416e9(0xc6))/0x3*(parseInt(_0x3416e9(0xc8))/0x4)+-parseInt(_0x3416e9(0xc1))/0x5*(parseInt(_0x3416e9(0xce))/0x6)+parseInt(_0x3416e9(0xda))/0x7+parseInt(_0x3416e9(0xd7))/0x8+-parseInt(_0x3416e9(0xe1))/0x9*(-parseInt(_0x3416e9(0xd5))/0xa)+-parseInt(_0x3416e9(0xc7))/0xb;if(_0x4c056a===_0x10aa55)break;else _0x1e4299['push'](_0x1e4299['shift']());}catch(_0x57747f){_0x1e4299['push'](_0x1e4299['shift']());}}}(_0x2adc,0x83cdf));const mongoose=require(_0x54b36f(0xd6)),bcrypt=require(_0x54b36f(0xd0)),uniqueValidator=require(_0x54b36f(0xcb)),s3ObjectSchema=new mongoose['Schema']({'key':String,'url':String}),customerSchema=new mongoose[(_0x54b36f(0xdd))]({'name':{'type':String,'required':!![]},'phoneNumber':{'type':String,'required':!![],'unique':!![]},'address':String,'email':{'type':String},'gender':{'type':String,'enum':[_0x54b36f(0xca),_0x54b36f(0xcc),_0x54b36f(0xdf)]},'dob':{'type':Date,'validate':{'validator':function(_0x43f92f){const _0x2f462a=_0x54b36f,_0x4407b9=new Date(),_0x23d039=_0x4407b9[_0x2f462a(0xd4)]()-_0x43f92f['getFullYear']();return _0x23d039>=0x12&&_0x43f92f<=_0x4407b9;},'message':'Invalid\x20DOB.\x20Customer\x20must\x20be\x20at\x20least\x2018\x20years\x20old\x20and\x20DOB\x20cannot\x20be\x20in\x20the\x20future.'}},'pan':{'type':String},'aadhar':{'type':String},'customerUid':{'type':String,'unique':!![]},'password':{'type':String},'deleteStatus':{'type':String,'default':_0x54b36f(0xdc),'enum':['true',_0x54b36f(0xdc)]},'agent':{'type':mongoose[_0x54b36f(0xdd)][_0x54b36f(0xcd)][_0x54b36f(0xd1)],'ref':_0x54b36f(0xd3),'required':!![]},'anniversary':Date,'profilePic':s3ObjectSchema},{'timestamps':!![]});customerSchema['index']({'email':0x1},{'unique':!![],'sparse':!![]}),customerSchema[_0x54b36f(0xd2)]({'pan':0x1},{'unique':!![],'sparse':!![]}),customerSchema['index']({'aadhar':0x1},{'unique':!![],'sparse':!![]}),customerSchema['index']({'name':0x1,'phoneNumber':0x1,'deleteStatus':0x1}),customerSchema[_0x54b36f(0xdb)](uniqueValidator,{'message':'{PATH}\x20must\x20be\x20unique.'});async function generateCustomerUid(){const _0x4f11be=_0x54b36f,_0x54e362=this[_0x4f11be(0xc4)]('Customer'),_0x5502ba=await _0x54e362[_0x4f11be(0xd8)]({},{'customerUid':0x1},{'sort':{'customerUid':-0x1}});let _0x2d15a0='00000001';if(_0x5502ba){const _0x5367c0=parseInt(_0x5502ba[_0x4f11be(0xe3)],0xa);_0x2d15a0=(_0x5367c0+0x1)['toString']()[_0x4f11be(0xcf)](0x8,'0');}return _0x2d15a0;}customerSchema[_0x54b36f(0xe2)](_0x54b36f(0xde),async function(_0x4233b6){const _0x9c223c=_0x54b36f;try{!this[_0x9c223c(0xe3)]&&(this[_0x9c223c(0xe3)]=await generateCustomerUid['call'](this));if(!this[_0x9c223c(0xc5)])return _0x4233b6();if(!this[_0x9c223c(0xc9)](_0x9c223c(0xc5)))return _0x4233b6();const _0x5ba032=0xa,_0x7ed004=await bcrypt['hash'](this[_0x9c223c(0xc5)],_0x5ba032);this[_0x9c223c(0xc5)]=_0x7ed004,_0x4233b6();}catch(_0x47ff96){_0x4233b6(_0x47ff96);}}),customerSchema[_0x54b36f(0xd9)][_0x54b36f(0xc3)]=async function(_0x4dd0ff,_0x49a572){const _0x5b82cf=_0x54b36f,_0x3ce7eb=await this[_0x5b82cf(0xd8)]({'$or':[{'email':_0x4dd0ff},{'phoneNumber':_0x4dd0ff}]});if(!_0x3ce7eb)throw new MyCustomError(0x190,_0x5b82cf(0xe0));const _0x216de0=await bcrypt['compare'](_0x49a572,_0x3ce7eb['password']);if(!_0x216de0)throw new MyCustomError(0x190,_0x5b82cf(0xe0));return _0x3ce7eb;},module['exports']=mongoose[_0x54b36f(0xc4)]('Customer',customerSchema);