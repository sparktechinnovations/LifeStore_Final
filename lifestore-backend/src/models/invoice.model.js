function _0x559d(_0xddb723,_0x34b04a){const _0x1258a7=_0x1258();return _0x559d=function(_0x559da8,_0x430191){_0x559da8=_0x559da8-0x10b;let _0x334629=_0x1258a7[_0x559da8];return _0x334629;},_0x559d(_0xddb723,_0x34b04a);}const _0x1c56c0=_0x559d;(function(_0x42282e,_0xbcdd65){const _0x5e4844=_0x559d,_0x523dc2=_0x42282e();while(!![]){try{const _0x128c05=-parseInt(_0x5e4844(0x117))/0x1+-parseInt(_0x5e4844(0x10f))/0x2*(parseInt(_0x5e4844(0x121))/0x3)+-parseInt(_0x5e4844(0x11b))/0x4*(parseInt(_0x5e4844(0x127))/0x5)+parseInt(_0x5e4844(0x11a))/0x6*(-parseInt(_0x5e4844(0x115))/0x7)+-parseInt(_0x5e4844(0x10b))/0x8*(-parseInt(_0x5e4844(0x11c))/0x9)+-parseInt(_0x5e4844(0x119))/0xa*(-parseInt(_0x5e4844(0x112))/0xb)+-parseInt(_0x5e4844(0x123))/0xc*(-parseInt(_0x5e4844(0x129))/0xd);if(_0x128c05===_0xbcdd65)break;else _0x523dc2['push'](_0x523dc2['shift']());}catch(_0x1f5787){_0x523dc2['push'](_0x523dc2['shift']());}}}(_0x1258,0x408ee));function _0x1258(){const _0x46543a=['169wRLTWc','Customer','call','Types','LIF-000000001','56WIfpMB','findOne','exports','Schema','499504lCcwJI','invoiceUid','toString','1256013BraoBx','pre','Store','411418sYPPUp','save','468996GnsoiI','Agent','30sXxwUV','6PudSBa','588esqZmd','656523osXcDb','{PATH}\x20Already\x20exists.','now','ObjectId','Invoice','3qvBXUM','model','559212bethyK','mongoose','LIF-','padStart','14185vnCBJu','plugin'];_0x1258=function(){return _0x46543a;};return _0x1258();}const mongoose=require(_0x1c56c0(0x124)),uniqueValidator=require('mongoose-unique-validator'),s3ObjectSchema=new mongoose[(_0x1c56c0(0x10e))]({'key':String,'url':String}),invoiceScheme=new mongoose[(_0x1c56c0(0x10e))]({'invoiceUid':{'type':String,'unique':!![]},'store':{'type':mongoose[_0x1c56c0(0x10e)][_0x1c56c0(0x12c)][_0x1c56c0(0x11f)],'ref':_0x1c56c0(0x114),'required':!![]},'customer':{'type':mongoose['Schema'][_0x1c56c0(0x12c)][_0x1c56c0(0x11f)],'ref':_0x1c56c0(0x12a),'required':!![]},'agent':{'type':mongoose['Schema'][_0x1c56c0(0x12c)][_0x1c56c0(0x11f)],'ref':_0x1c56c0(0x118),'required':!![]},'products':[{'product':{'type':mongoose[_0x1c56c0(0x10e)]['Types'][_0x1c56c0(0x11f)],'ref':'Product','required':!![]},'quantity':{'type':Number,'required':!![]}}],'totalAmount':{'type':Number,'required':!![]},'issueDate':{'type':Date,'default':Date[_0x1c56c0(0x11e)]},'invoiceDoc':s3ObjectSchema},{'timestamps':!![]});invoiceScheme[_0x1c56c0(0x128)](uniqueValidator,{'message':_0x1c56c0(0x11d)});async function generateInvoiceUid(){const _0x4af643=_0x1c56c0,_0x18eee4=this[_0x4af643(0x122)](_0x4af643(0x120)),_0x1ffceb=await _0x18eee4[_0x4af643(0x10c)]({},{'invoiceUid':0x1},{'sort':{'invoiceUid':-0x1}});let _0x5bd721=_0x4af643(0x12d);if(_0x1ffceb){const _0x4379e3=parseInt(_0x1ffceb[_0x4af643(0x110)]['slice'](0x4),0xa);_0x5bd721=_0x4af643(0x125)+(_0x4379e3+0x1)[_0x4af643(0x111)]()[_0x4af643(0x126)](0x9,'0');}return _0x5bd721;}invoiceScheme[_0x1c56c0(0x113)](_0x1c56c0(0x116),async function(_0x522bc0){const _0x4a61fe=_0x1c56c0;try{!this['invoiceUid']&&(this[_0x4a61fe(0x110)]=await generateInvoiceUid[_0x4a61fe(0x12b)](this)),_0x522bc0();}catch(_0x3033f8){_0x522bc0(_0x3033f8);}}),module[_0x1c56c0(0x10d)]=mongoose[_0x1c56c0(0x122)](_0x1c56c0(0x120),invoiceScheme);